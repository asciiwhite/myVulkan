language: cpp
sudo: required
os: linux
dist: trusty
compiler:
  - gcc
install:
  - sudo apt-get -qq update
  - sudo apt-get install -y libxinerama-dev libxcursor-dev libxi-dev libassimp-dev libglm-dev graphviz libxcb-dri3-0 libxcb-present0 libpciaccess0 cmake libpng-dev libxcb-dri3-dev libx11-dev libx11-xcb-dev libmirclient-dev libwayland-dev libxrandr-dev
  - VULKAN_VERSION=1.1.73.0
  - VULKAN_SDK_FILE=vulkansdk-linux-x86_64-$VULKAN_VERSION.run
  - wget -O $VULKAN_SDK_FILE https://sdk.lunarg.com/sdk/download/$VULKAN_VERSION/linux/$VULKAN_SDK_FILE
  - chmod ugo+x $VULKAN_SDK_FILE
  - ./$VULKAN_SDK_FILE
  - export VULKAN_SDK=$TRAVIS_BUILD_DIR/VulkanSDK/$VULKAN_VERSION/x86_64
# Specify a display with xvfb for window creation / testing
before_script:
  - "export DISPLAY=:99.0"
  - "sh -e /etc/init.d/xvfb start"
  - sleep 3 # give xvfb some time to start
script:
  - cmake .
  - cmake --build . -- -j8
  - ctest --output-on-failure
notifications:
  email:
    recipients:
      - serialize.this@gmail.com
    on_success: never
    on_failure: never